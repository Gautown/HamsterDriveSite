---
// Assets
import Logo from "@/components/assets/Logo.astro";
// Foundations
import Wrapper from "@/components/fundations/containers/Wrapper.astro";
// Components
import DocsSearch from "@/components/docs/DocsSearch.astro";
import ThemeToggle from "@/components/fundations/elements/ThemeToggle.astro";
import LogoContextMenu from "@/components/global/LogoContextMenu.astro";
// Icons
import Menu from "@/components/fundations/icons/Menu.astro";
// import Github from "@lucide/astro/icons/github";
export interface Props {
  variant?: "default" | "docs";
}
const { variant = "default" } = Astro.props;
const navLinks = [
  { title: "首页", href: "/" },
  { title: "产品介绍", href: "/docs" },
  { title: "功能特性", href: "/docs/features" },
  { title: "安装指南", href: "/docs/installation" },
  { title: "快速入门", href: "/docs/quickstart" },
  { title: "开发指南", href: "/docs/development" },
];
// GitHub repo info
const githubRepo = "Gautown/HamsterDrivers";
---

<header class={`sticky top-0 z-50 w-full navbar ${variant === "docs" ? "bg-muted" : "bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"}`}>
  <Wrapper variant="standard">
    <div class="flex h-12 items-center justify-between ">
      <LogoContextMenu>
        <a href="/" class="font-semibold flex items-center gap-2">
          <Logo class={`align-middle ${variant === "docs" ? "size-4" : "size-3 sm:size-4"}`} />
          <span class="align-middle">仓鼠驱动管家</span>
        </a>
      </LogoContextMenu>
      
      <!-- Mobile Menu Toggle Checkbox (Hidden) -->
      <input type="checkbox" id="mobile-menu-toggle" class="hidden" />
      
      <!-- Mobile Menu Backdrop -->
      <label for="mobile-menu-toggle" class="fixed inset-0 z-40 bg-overlay/10 backdrop-blur-sm opacity-0 pointer-events-none transition-opacity duration-300 md:hidden" id="mobile-backdrop">
      </label>
      
      <!-- Mobile Menu Button -->
      <label for="mobile-menu-toggle" class="inline-flex items-center justify-center size-7 text-muted-foreground cursor-pointer md:hidden menu-btn">
        <span class="text-lg menu-icon">☰</span>
        <span class="text-lg close-icon">✕</span>
      </label>
      
      <!-- Mobile Menu Container -->
      <nav
        class="absolute top-full left-0 right-0 z-50 bg-muted border-t overflow-hidden transition-height duration-300 ease-in-out md:hidden"
        id="mobile-menu"
      >
        <div class="p-4">
          <div class="space-y-2">
            {navLinks.map((link) => (
              <a
                href={link.href}
                class="mobile-menu-item"
              >
                {link.title}
              </a>
            ))}
          </div>
        </div>
      </nav>
      
      <div class="hidden md:flex items-center gap-4">
        <nav class={`flex items-center gap-4 ${variant !== "docs" ? "sm:gap-6" : ""} text-sm ${variant === "docs" ? "font-medium" : ""}`}>
          {navLinks.map((link) => (
            <a
              href={link.href}
              class="text-muted-foreground hover:text-foreground transition-colors whitespace-nowrap"
            >
              {link.title}
            </a>
          ))}
        </nav>
        {variant === "docs" ? (
          <div class="flex items-center border-l border-border pl-4 gap-1">
            <a
              href={`https://github.com/${githubRepo}`}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center justify-center gap-1.5 h-7 px-2 rounded-md text-sm text-muted-foreground hover:text-foreground hover:bg-accent transition-colors"
              aria-label="GitHub"
            >
              <span>GitHub</span>
            </a>
            <DocsSearch />
            <ThemeToggle size="xs" />
          </div>
        ) : (
          <>
            <a
              href={`https://github.com/${githubRepo}`}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center justify-center gap-1.5 h-7 px-2 rounded-md text-sm text-muted-foreground hover:text-foreground hover:bg-accent transition-colors"
              aria-label="GitHub"
            >
              <span>GitHub</span>
            </a>
            <ThemeToggle size="xs" />
          </>
        )}
      </div>
    </div>
  </Wrapper>
</header>
<style>
  /* 全局样式重置 */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Microsoft Yahei", sans-serif;
  }

  /* 导航栏容器 */
  .navbar {
    padding: 0 20px;
  }

  /* 导航品牌/Logo */
  .navbar-brand {
    display: flex;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    font-size: 24px;
    font-weight: bold;
  }

  /* 隐藏复选框（核心：用于触发菜单展开/收起） */
  #mobile-menu-toggle {
    display: none;
  }

  /* 移动端菜单按钮容器（汉堡+关闭图标） */
  .menu-btn {
    font-size: 24px;
    cursor: pointer;
    /* 桌面端隐藏汉堡按钮 */
    display: none;
  }

  /* 汉堡图标（默认显示） */
  .menu-icon {
    display: inline-block;
  }

  /* 关闭图标（默认隐藏） */
  .close-icon {
    display: none;
  }

  /* 导航菜单列表 */
  .nav-menu {
    list-style: none;
    display: flex;
    float: right;
    line-height: 60px;
  }

  /* 菜单项 */
  .nav-menu li {
    margin-left: 25px;
  }

  /* 菜单项链接 */
  .nav-menu a {
    text-decoration: none;
    font-size: 16px;
    padding: 8px 10px;
    border-radius: 4px;
    transition: background-color 0.3s;
  }

  /* 链接hover效果 */
  .nav-menu a:hover {
    background-color: #34495e;
  }

  /* 响应式断点：屏幕宽度≤768px（移动端） */
  @media (max-width: 768px) {
    /* 显示汉堡按钮 */
    .menu-btn {
      display: block;
    }

    /* 移动端默认隐藏菜单 */
    #mobile-menu {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      /* 初始隐藏：高度0+溢出隐藏 */
      height: 0;
      overflow: hidden;
      transition: height 0.3s ease;
    }

    /* 菜单项容器 */
    #mobile-menu > div > div {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    /* 菜单项样式 - 使用更具体的选择器 */
    #mobile-menu .p-4 .space-y-2 a.mobile-menu-item {
      display: block !important;
      line-height: 3rem !important;
      padding: 0.5rem 1rem !important;
      font-size: 1.2rem !important;
      border-radius: 0.375rem !important;
      color: var(--muted-foreground) !important;
      transition: color 0.2s, background-color 0.2s !important;
      text-align: center !important;
      width: 100% !important;
      box-sizing: border-box !important;
      /* 重置所有可能被Tailwind覆盖的样式 */
      margin: 0 !important;
      border: none !important;
      background: none !important;
      text-decoration: none !important;
      font-weight: normal !important;
      letter-spacing: normal !important;
      text-transform: none !important;
    }

    /* 菜单项悬停效果 */
    #mobile-menu .p-4 .space-y-2 a.mobile-menu-item:hover {
      color: var(--foreground) !important;
      background-color: var(--accent) !important;
    }
    /* 复选框被选中时，展开菜单（设置高度） */
    #mobile-menu-toggle:checked ~ #mobile-menu {
      /* 高度设为auto会导致transition失效，这里计算所有菜单项总高度 */
      height: 288px; /* 6个菜单项 × 3rem(48px) = 288px */
    }

    /* 复选框选中时：切换图标（隐藏汉堡，显示关闭） */
    #mobile-menu-toggle:checked ~ .menu-btn .menu-icon {
      display: none;
    }
    #mobile-menu-toggle:checked ~ .menu-btn .close-icon {
      display: inline-block;
    }
  }
</style>

<!-- GitHub stars functionality removed due to proxy connection errors -->
